<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.quspacedragon.workflow.mapper.GoodsMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.quspacedragon.workflow.entity.Goods">
        <result column="id" property="id"/>
        <result column="create_time" property="createTime"/>
        <result column="last_ver" property="lastVer"/>
        <result column="op_time" property="opTime"/>
        <result column="is_valid" property="isValid"/>
        <result column="type" property="type"/>
        <result column="status" property="status"/>
        <result column="goods_no" property="goodsNo"/>
        <result column="enterprise_id" property="enterpriseId"/>
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
	id,
	create_time AS createTime,
	last_ver AS lastVer,
	op_time AS opTime,
	is_valid AS isValid,
	type,
	status,
        goods_no AS goodsNo, enterprise_id AS enterpriseId
    </sql>


    <select id="findByCustomerId" resultMap="BaseResultMap">
		select
        g.id,
        g.create_time ,
        g.op_time ,
        g.type,
        g.status,
        g.goods_no , g.enterprise_id
        from goods g
left join
bill b
on b.goods_id = g.id
<where>
     b.is_valid =1 AND
     g.is_valid =1 AND
     b.customer_id =#{customerId}
    <if test="startTime!=null">
        and g.`create_time` &gt; #{startTime}
    </if>
    <if test="endTime!=null">
        and g.`create_time` &lt; #{endTime}
    </if>
</where>


	</select>

</mapper>
